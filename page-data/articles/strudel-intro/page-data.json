{"componentChunkName":"component---src-pages-articles-markdown-remark-frontmatter-slug-js","path":"/articles/strudel-intro/","result":{"data":{"markdownRemark":{"html":"<p>Today we'll learn how to code by creating our own music pieces <a href=\"https://www.youtube.com/watch?v=qkTJTf7Yvk8\">like this one!</a>\nThe type of coding we'll be learning is called <em>functional programming</em>. We'll be using a framework (a wrapper around programming language) called <a href=\"https://strudel.tidalcycles.org/\"><em>Strudel</em> Javascript framework</a>.\nFYI There is a similar framework build in another language (Haskell) called <a href=\"https://tidalcycles.org\"><em>TidalCycles</em> Haskell framework</a></p>\n<p>Strudel aims to be a drop-in replacement for TidalCycles, which currently requires a bit of an annoying setup to run - however it is one of the most popular <a href=\"https://en.wikipedia.org/wiki/Live_coding\">livecoding</a> frameworks used by artists to generate new sounds. Some examples of algorithmic music artists include PC Music and Charli XCX collaborator Lil Data (<a href=\"https://youtu.be/EqbXAk0Xm-I\">example 1</a>, <a href=\"https://youtu.be/KdSiv7unrx8\">example 2</a>), and dance music duo Autechre (<a href=\"https://www.youtube.com/watch?v=qkTJTf7Yvk8\">example 1</a>, <a href=\"https://youtu.be/-F665Mkc0D0\">example 2</a>).</p>\n<p>If this kind of music isn't your kind of thing - don't worry, it doesn't all sound like this! We are just going to use the process of algorithmic music to learn more about how to code. First off; you will need to visit the <a href=\"https://strudel.tidalcycles.org/\">Strudel Website</a>. From here, you'll be greeted with a scary looking page:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b5b9a31403c92912c376340b122730b/d9ed5/start_screen.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABn0lEQVR42n2TWW7cMAyG5xSZmaa2xFWy5cykCZD73+wvSDtFFqQPBEWR+rjZpzFWPD4+4uHhjPP5gvP5nHK5XFLifL3+Sl/YEed+xf0+4fY04fle8Poqqd/eDKdpqpjngkqEUkMY01wwl5J23BMLSq17TKkoNeILSpkxzxNKKZim3zBTnMwNfTjGzdAWgTXFelP0jaGmMFcsw2GNYU0govDu+UaU0xYRVGL0vuDEeWEwdogRWCtYKohDM5gFppaPmHcAk4CIQUQQPYC1oveOky8MaQEoIBIIG6hSJhE1MHG2omogptSqDj5gkSQk4DtQO6RJBrw7WSQfqTmIIvPYW20r1Fomycq9Z+JPQK0tW2SmDAyH+ZISsAh29/S35YZl+3MA6j/5BFzWFX3smaJdE8/M3gYkR6AwswRGdX29YxnPWLaXhK9PLxlfazmAdof3FbGcEI3lsIAr51k5ZnbMKj6hWvKsuSg99IelRFW17vOTnOGHWR72XiEfW5Yv/i9LiQpqzoKOYX+XAP4E+gaMX2+MgW3b8uIn4P9g78Dmjr9vnVHTlOp7GQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"start page\"\n        title=\"\"\n        src=\"/static/5b5b9a31403c92912c376340b122730b/5a190/start_screen.png\"\n        srcset=\"/static/5b5b9a31403c92912c376340b122730b/772e8/start_screen.png 200w,\n/static/5b5b9a31403c92912c376340b122730b/e17e5/start_screen.png 400w,\n/static/5b5b9a31403c92912c376340b122730b/5a190/start_screen.png 800w,\n/static/5b5b9a31403c92912c376340b122730b/c1b63/start_screen.png 1200w,\n/static/5b5b9a31403c92912c376340b122730b/29007/start_screen.png 1600w,\n/static/5b5b9a31403c92912c376340b122730b/d9ed5/start_screen.png 2880w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>There's a good chance this screen looks slightly different to yours - by default, Strudel opens with a random code example from the creators. To play what this code produces, click the \"Play\" button in the top right (in the yellow box)!</p>\n<p>You can see another example by clicking the \"Shuffle\" button. These are all examples written by the Strudel team as examples of what the framework is capable of!</p>\n<h2>How does Strudel Work?</h2>\n<p>Strudel is interpreting Javascript code and outputting sound from your browser - it operates by having a constant <em>cycle</em> running in the background that governs what sounds are played when, by distributing patterns over this cycle. We can define patterns in a number of ways - the easiest being the <code class=\"language-text\">s()</code> function (we'll talk about what functions are in more detail later). Try deleting all the code in the editor and just putting in the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bd bd\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now try hitting play. You should hear a kick drum play - this is because <code class=\"language-text\">bd</code> stands for \"bass drum\", and by supplying the <code class=\"language-text\">s()</code> function with a pattern (<code class=\"language-text\">\"bd bd\"</code>), we are telling it to play two bass drums per cycle. Try changing the pattern in the <code class=\"language-text\">s()</code> function to <code class=\"language-text\">\"bd bd bd bd\"</code>. What happens? Can you think of why? As with all the following csnippets of code, have a play around with them to see what you can come up with!</p>\n<p>If you guessed that we are trying to fit twice the amount of drums into one cycle, well done!</p>\n<p>This way of writing patterns is called the <em>mini notation</em>, and is a codified way of writing down patterns. These patterns can be used to control a number of things, such as rhythms for drums, notes, parameters for effects and more. Mini notation doesn't stop there - we have more tools at our disposal!</p>\n<p>By default, Strudel will try and evenly distribute your pattern over a single cycle - but sometimes you want more complex rhythms. By using <code class=\"language-text\">[]</code>, you can tell strudel to treat a segement of a pattern as one note - try the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bd bd bd [bd bd bd bd]\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Strudel will compress all of those kick drums into the last quarter of the cycle. We can also define \"rests\" by using the <code class=\"language-text\">~</code> character:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bd bd ~ [~ bd]\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We can slow or speed patterns up using the <code class=\"language-text\">/</code> and <code class=\"language-text\">*</code> operators, distributing them over part of or many cycles:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[bd bd bd [bd bd bd]]/2\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Finally, can alternate between different options per cycle using the <code class=\"language-text\">&lt;></code> operator (try and guess what <code class=\"language-text\">sn</code> and <code class=\"language-text\">cp</code> stand for!):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bd bd bd &lt;sn cp>\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>There's more to the mini notation than this, with some shortcuts for commonly used rythms - but we don't need to know them for now. Let's move onto something cooler!</p>\n<p>If we want two or more patterns playing at once, we have to use the <code class=\"language-text\">stack</code> function, with our different patterns seperated by commas:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">stack</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bd bd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"~ cp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[~ hh]*2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now it sounds like we're getting somewhere! What about loading other sounds in?</p>\n<p>Well, try changing the above code to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">samples</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">bd</span><span class=\"token operator\">:</span> <span class=\"token string\">'808bd/BD0050.WAV'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">cp</span><span class=\"token operator\">:</span> <span class=\"token string\">'808/CP.WAV'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">hh</span><span class=\"token operator\">:</span> <span class=\"token string\">'808oh/OH00.WAV'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'github:tidalcycles/Dirt-Samples/master/'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">stack</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bd bd\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"~ cp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[~ hh]*2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>What does this do?</p>\n<p>Well the <code class=\"language-text\">samples</code> function is in charge of loading new samples into Strudel. It takes 2 arguments (separated by a comma) - the second is the location of where Strudel should start looking for the files - in our case, this is a GitHub code repository <a href=\"https://github.com/tidalcycles/Dirt-Samples\">here</a>. GitHub can be thought of as a website used to store your code/small files. This repository(GitHub folder) has lots of folders containing <code class=\"language-text\">.wav</code> sound files that we need to tell Strudel what to do with. That's where the first argument comes in - it's a list of pairs (with a <code class=\"language-text\">:</code> in between), first telling what strudel should map the sound do (in our case, we are asking it to override <code class=\"language-text\">bd</code>, <code class=\"language-text\">cp</code>, and <code class=\"language-text\">hh</code>, but you can use custom names if you want), and the second telling it where to find these samples in the directory we just pointed to.</p>\n<p>Is this a huge headache? Yes - but this allows us to programatically download samples from other areas of the internet! If you want to upload your own files to Strudel, I'd recommend using the same method as above with your own GitHub repository.</p>\n<h2>We have Rhythm - but what about Pitch?</h2>\n<p>Using just the above, we can already crate some complex percussive patterns - but Strudel also allows us to pitch samples using another function - the <code class=\"language-text\">note()</code> function. For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;[c3 e3 g3 c4] [f2 a2 c3 f3] [a2 c3 e3 g3] [g2 d3 g3 b3]>\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"piano\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">pianoroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>(Note: This may get very annoying! I've also moved each function to it's own line to improve readability - this is totally fine and encouraged for readable code!)</p>\n<p>Some notes here:</p>\n<ul>\n<li>We are now <em>chaining functions together</em> - this is the essence of functional programming - every funcion takes in an input and output, and applies some effect to it. Here, the <code class=\"language-text\">note()</code> function sees it has nothing before it in the chain, so just outputs a <code class=\"language-text\">Pattern</code> object that is passed forward to the <code class=\"language-text\">s()</code> function. This function, seeing it has two inputs (the previous link in the chain, and the <code class=\"language-text\">\"piano\"</code> argument), takes these and outputs a new pattern with each of the notes replaced by the piano sound. If we remove the <code class=\"language-text\">.s(\"piano\")</code> link in the chain, the code will still run, but with a sad sounding default sample.</li>\n<li>We can write the notes either as numbers (half-steps away from the root note), or as letter notes as we would on a piano (sharps are represented by an \"s\" (e.g. <code class=\"language-text\">cs3</code>) and flats by a \"b\" (e.g. <code class=\"language-text\">cb3</code>)). Later we can generate these patterns algorithmically using arpeggiation and more!</li>\n<li>I've included the <code class=\"language-text\">pianoroll()</code> function - this just visualises the pitches in the background in a pretty way!</li>\n</ul>\n<p>The crazy thing is that the input to <code class=\"language-text\">note()</code> is a pattern - but so is the <code class=\"language-text\">s()</code> input. What happens if we change the sound like follows? Take the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;[c3 e3 g3 c4] [f2 a2 c3 f3] [a2 c3 e3 g3] [g2 d3 g3 b3]>\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[piano ocarina organ_8inch sax_stacc]/4\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">pianoroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>(Note: I've added a <code class=\"language-text\">.decay(0.7).sustain(0)</code> to this to stop you from going mad - this means that the sample decays after <code class=\"language-text\">0.7</code> seconds to a volume of <code class=\"language-text\">0</code> - otherwise all the samples play on top of each other! Also note that these parameters accept patterns and we could change them over a cycle!!!)</p>\n<p>Amazing!</p>\n<p>We can now make a suitable festive song using Strudel with a bit of work (bonus points if you can guess the song without running the code!):</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  [\n    [e3 e3 e3 ~]\n    [e3 e3 e3 ~]\n    [e3 g3 c3 d3]\n    [e3 ~ ~ ~]\n    [f3 f3 f3 f3]\n    [f3 e3 e3 [e3 e3]]\n    &lt;[e3 d3 d3 e3 d3 ~ g3 ~ ] [g3 g3 f3 d3 c3 ~ ~ ~]>@2\n  ]\n/8</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"piano\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>(Backticks are used for a multi line pattern and the <code class=\"language-text\">@</code> symbol means that the pattern should given twice the normal share of the cycle)</p>\n<h2>Effects and modifiers</h2>\n<p>The great thing about functional programming is it lends itself nicely to building chains of effects for audio outputs. In some ways, we have already seen one effect - that modifies the pattern from the default sound to the one given - however obviously this isn't what we think of when we talk about effects!</p>\n<p>As of writing, Strudel is still fairly new - so <a href=\"https://strudel.tidalcycles.org/tutorial/\">the documentation</a> is not complete. The <a href=\"https://tidalcycles.org/docs/reference/cycles\">TidalCycles documenation</a> can give a clearer picture as to what is going on - sometimes though you'll just need to poke around to see if you can understand something!</p>\n<p>Effects can be applied to a sound by simply chaining the function to the pattern. Consider the following - I assign the above sound to the variable <code class=\"language-text\">jingle_bells</code> to organise the code a bit better:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> jingle_bells <span class=\"token operator\">=</span> <span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  [\n    [e3 e3 e3 ~]\n    [e3 e3 e3 ~]\n    [e3 g3 c3 d3]\n    [e3 ~ ~ ~]\n    [f3 f3 f3 f3]\n    [f3 e3 e3 [e3 e3]]\n    &lt;[e3 d3 d3 e3 d3 ~ g3 ~ ] [g3 g3 f3 d3 c3 ~ ~ ~]>@2\n  ]\n/8</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"piano\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\njingle_bells<span class=\"token punctuation\">.</span><span class=\"token function\">cutoff</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>This applies a low pass filter to the sound at 100Hz - making it sound a bit muffled. As with most things in Strudel, we can make this a pattern:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">...</span>\njingle_bells<span class=\"token punctuation\">.</span><span class=\"token function\">cutoff</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[100 500 1000 10000]/4\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>It's fairly common to want to oscillate the cutoff of a signal according to a simple wave (e.g. a sine wave) - fortunately in Strudel we can do this! You can also control the filter resonance using the <code class=\"language-text\">.resonance()</code> function!</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">...</span>\njingle_bells<span class=\"token punctuation\">.</span><span class=\"token function\">cutoff</span><span class=\"token punctuation\">(</span>sine<span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slow</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">resonance</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Higher Order Functions</h2>\n<p>Most functions in Strudel take in a pattern - however some need to take in another function to run. Two examples of this are <code class=\"language-text\">off()</code> and <code class=\"language-text\">sometimes()</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> jingle_bells <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  [\n    [e3 e3 e3 ~]\n    [e3 e3 e3 ~]\n    [e3 g3 c3 d3]\n    [e3 ~ ~ ~]\n    [f3 f3 f3 f3]\n    [f3 e3 e3 [e3 e3]]\n    &lt;[e3 d3 d3 e3 d3 ~ g3 ~ ] [g3 g3 f3 d3 c3 ~ ~ ~]>@2\n  ]\n/8</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">x</span><span class=\"token operator\">=></span>x<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"piano\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\njingle_bells</code></pre></div>\n<p>The syntax here is a bit confusing for two reasonse:</p>\n<ul>\n<li>We have to change the order of how we apply the functions. This is because what one function outputs needs to be acceptable for the next output; the <code class=\"language-text\">add</code> function within the <code class=\"language-text\">off</code> function works on note values before they are transformed - so it must be applied at this step!</li>\n<li>The second argument in the <code class=\"language-text\">off</code> function is an <em>anonymous function</em> - that is, we define a custom function to let <code class=\"language-text\">off</code> what to do with the offset notes. Here we are just taking their note value and adding <code class=\"language-text\">12</code> semitones (or an octave).</li>\n</ul>\n<p><code class=\"language-text\">sometimes()</code> works very similarly:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> jingle_bells <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  [\n    [e3 e3 e3 ~]\n    [e3 e3 e3 ~]\n    [e3 g3 c3 d3]\n    [e3 ~ ~ ~]\n    [f3 f3 f3 f3]\n    [f3 e3 e3 [e3 e3]]\n    &lt;[e3 d3 d3 e3 d3 ~ g3 ~ ] [g3 g3 f3 d3 c3 ~ ~ ~]>@2\n  ]\n/8</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">sometimes</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token operator\">=></span>x<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"piano\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\njingle_bells</code></pre></div>\n<p>By combining all these tools together, you can get some pretty interesting outputs! For example - take the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> melody <span class=\"token operator\">=</span> <span class=\"token string\">\"[~ db3 f3 c4]!6 [~ bb2 eb3 bb3] [~ bb2 e3 bb3] [~ c3 f3 c4]!4\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> harmony <span class=\"token operator\">=</span> <span class=\"token string\">\"[db2,f2,ab2]!6 [eb2,gb2,bb2] [e2,gb2,bb2] [f2,ab2,c3]!4\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> bass <span class=\"token operator\">=</span> <span class=\"token string\">\"bb1@6 eb2 e2 f2@4\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">stack</span><span class=\"token punctuation\">(</span>\n  melody\n    <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">rarely</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token operator\">=></span>x<span class=\"token punctuation\">.</span><span class=\"token function\">off</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">x</span><span class=\"token operator\">=></span>x<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">velocity</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ocarina\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sometimes</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">x</span><span class=\"token operator\">=></span>x<span class=\"token punctuation\">.</span><span class=\"token function\">jux</span><span class=\"token punctuation\">(</span>rev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"salmon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  harmony\n    <span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ocarina\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">hcutoff</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">cutoff</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">decay</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">sustain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">color</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"darkseagreen\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  bass\n    <span class=\"token punctuation\">.</span><span class=\"token function\">note</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">s</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sine\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">shape</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">gain</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">slow</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pianoroll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>That's it for this post - have a play around with some of the functions and see what you can come up with!</p>","frontmatter":{"date":"June 11, 2023","slug":"strudel-intro","title":"Algorithmic Music with Strudel","summary":"Introduction to making music with code","featured":true,"author":"Sam Ball","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282828","images":{"fallback":{"src":"/static/eaca69f1f1a51646b5c8d3cf3cb92872/1e21a/landing.jpg","srcSet":"/static/eaca69f1f1a51646b5c8d3cf3cb92872/1bf32/landing.jpg 200w,\n/static/eaca69f1f1a51646b5c8d3cf3cb92872/eee8e/landing.jpg 400w,\n/static/eaca69f1f1a51646b5c8d3cf3cb92872/1e21a/landing.jpg 800w,\n/static/eaca69f1f1a51646b5c8d3cf3cb92872/f6810/landing.jpg 1600w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/eaca69f1f1a51646b5c8d3cf3cb92872/b6124/landing.webp 200w,\n/static/eaca69f1f1a51646b5c8d3cf3cb92872/dff21/landing.webp 400w,\n/static/eaca69f1f1a51646b5c8d3cf3cb92872/b2a35/landing.webp 800w,\n/static/eaca69f1f1a51646b5c8d3cf3cb92872/e9d78/landing.webp 1600w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":800,"height":450}}}}}},"pageContext":{"id":"f1689136-c0e7-5df3-877e-182bf4d42414","frontmatter__slug":"strudel-intro","__params":{"frontmatter__slug":"strudel-intro"}}},"staticQueryHashes":[],"slicesMap":{}}